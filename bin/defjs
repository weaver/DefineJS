#!/bin/sh

## Hi, this defnode script can be used instead of `node`. It
## bootstraps the DefineJS module loader and loads up a main program.

## Find the canonical location of this script in the filesystem.
here=`python -c "import os;print os.path.realpath('$0')"`

## Use this location to determine the base of the DefineJS
## installation.
base=`dirname ${here}`/..

if [ -z "${node}" ]; then
  if (nave &> /dev/null); then
      node="nave use v0.2.6"
  else
      node="node"
  fi
fi

## Bootstrap
exec $node ${base}/lib/main.js $@